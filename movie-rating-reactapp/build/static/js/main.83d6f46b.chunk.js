(this["webpackJsonpmovie-rating-reactapp"]=this["webpackJsonpmovie-rating-reactapp"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},244:function(e,t){},245:function(e,t){},252:function(e,t){},254:function(e,t){},286:function(e,t,n){"use strict";n.r(t);var a,c,s,i,r=n(1),o=n.n(r),l=n(25),d=n.n(l),u=(n(111),n(3)),j=n(6),b=n(7),h=(n(112),n(9)),m=n(31),O=n(98),g="USER_LOGIN_SUCCESS",f="USER-LOGIN-FAILED",v="USER_LOGOUT",p={err:"",user:{},isLogged:!1},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(u.a)(Object(u.a)({},e),{},{user:t.payload,isLogged:!0,err:""});case f:return document.getElementById("usernameincorrect").innerHTML="User Credentials are Incorrect!",Object(u.a)(Object(u.a)({},e),{},{isLogged:!1,err:"Username or password incorrect"});case v:return p;case"CHANGE_ACCOUNTDETAILS":var n=localStorage.getItem("user"),a=JSON.parse(n),c=Object(u.a)(Object(u.a)({},a),{},{userName:t.payload.username,userFirstName:t.payload.firstname,userLastName:t.payload.lastname}),s=JSON.stringify(c);return localStorage.setItem("user",s),Object(u.a)(Object(u.a)({},e),{},{user:Object(u.a)(Object(u.a)({},e.user),{},{userName:t.payload.username,userFirstName:t.payload.firstname,userLastName:t.payload.lastname})});default:return e}},y="FAVORITE_MOVIES_FETCH_SUCCESS",N="FAVORITE_MOVIES_FETCH_FAIL",w="POST_FAVORITE_MOVIE",k="POST_FAVORITE_MOVIE_SUCCESS",L="POST_FAVORITE_MOVIE_FAIL",E="DELETE_FAVORITE_MOVIE",C="DELETE_FAVORITE_MOVIE_SUCCESS",I="DELETE_FAVORITE_MOVIE_FAIL",S={FavMovies:[],err:"",isloading:{}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(u.a)(Object(u.a)({},S),{},{FavMovies:t.payload.favoritemovies});case w:case E:return Object(u.a)(Object(u.a)({},e),{},{isloading:Object(u.a)(Object(u.a)({},e.isloading),{},Object(j.a)({},t.payload,!0))});case N:case L:case I:return Object(u.a)(Object(u.a)({},e),{},{err:t.payload});case k:case C:return Object(u.a)(Object(u.a)({},S),{},{isloading:Object(u.a)(Object(u.a)({},e.isloading),{},Object(j.a)({},t.payload[1],!1)),FavMovies:t.payload[0].favoritemovies});case"REFRESH_FAVORITES":return S;default:return e}},M=Object(m.b)({auth:x,fav:T}),F=Object(m.c)(M,Object(m.a)(O.a)),A=n(10),B=n(26),_=n.n(B),H=n(47),R=n(8),V=n.n(R),P=function(e){return console.log("user trying to log in"),{type:g,payload:e}},U=n(4),D=n(0),W=Object(h.b)((function(e){return{userDetails:e.auth.user,isLogged:e.auth.isLogged}}),(function(e){return{Login:function(t){return e((n=t,function(){var e=Object(H.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V.a.post("/backendapi/users/login",n).then((function(e){console.log();var n=JSON.stringify(e.data);localStorage.setItem("user",n),t(P(e.data))})).catch((function(e){var n;console.log("User login failed"),t((n=e.message,{type:f,payload:n}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n}}}))((function(e){var t=Object(U.f)(),n=Object(r.useState)({username:"",password:""}),a=Object(b.a)(n,2),c=a[0],s=a[1];Object(r.useEffect)((function(){if(e.isLogged)t.push("/movies");else if(""!==localStorage.getItem("username"))s((function(e){return Object(u.a)(Object(u.a)({},e),{},{username:localStorage.getItem("username")})}));else{var n=localStorage.getItem("user"),a=JSON.parse(n);a&&s((function(e){return Object(u.a)(Object(u.a)({},e),{},{username:a.userName})}))}}),[e.isLogged]);var i=function(e){document.getElementById("usernameincorrect").innerHTML="",s((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))};return Object(D.jsxs)("div",{id:"logmain",children:[Object(D.jsxs)("div",{className:"logineachdiv",children:[Object(D.jsx)("div",{className:"userlo",children:Object(D.jsx)("i",{class:"bi bi-person-fill"})}),Object(D.jsx)("input",{type:"text",name:"username",onChange:i,value:c.username})]}),Object(D.jsxs)("div",{className:"logineachdiv",children:[Object(D.jsx)("div",{className:"userlo",children:Object(D.jsx)("i",{class:"bi bi-key-fill"})}),Object(D.jsx)("input",{type:"password",name:"password",onChange:i,value:c.password})]}),Object(D.jsx)("div",{className:"logineachdiv ",children:Object(D.jsx)("div",{className:"loginbutton",onClick:function(){e.Login(c).then((function(){console.log("User logg")})).catch((function(e){console.log(e)})),e.userDetails.success&&(document.getElementById("usernameincorrect").innerHTML="",t.push("/movies"))},children:"Log in"})}),Object(D.jsx)("div",{className:"logineachdiv",id:"usernameincorrect"}),Object(D.jsxs)("div",{className:"logineachdiv",children:["Don't have an acoount ",Object(D.jsx)(A.b,{to:"/signup",children:"Create Account"}),Object(D.jsx)("div",{style:{marginTop:20},children:Object(D.jsx)(A.b,{to:"/otpgenerator",children:"Forgot Password/username? "})}),Object(D.jsx)("div",{style:{marginTop:20,color:"rgb(85, 26, 139)",cursor:"pointer",textDecoration:"underline"},onClick:function(){localStorage.removeItem("user"),t.push("/movies")},children:"Continue without Logging in"})]})]})})),J=n(100),z=n.n(J),G=Object(h.b)()((function(){var e=Object(r.useState)({firstname:"",username:"",emailid:"",lastname:"",password:"",confirmpassword:""}),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(b.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)([]),d=Object(b.a)(l,2),h=d[0],m=d[1],O=Object(r.useState)(""),g=Object(b.a)(O,2),f=g[0],v=g[1];Object(r.useEffect)((function(){V.a.get("/backendapi/users/usernames").then((function(e){o(e.data)})).catch((function(e){console.log("Fetch failed of getting all usernames")})),V.a.get("/backendapi/users/emails").then((function(e){m(e.data)})).catch((function(e){console.log(e)}))}),[f]);var p=function(e){document.getElementById("errorhandle1").innerHTML="",a((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))};return Object(D.jsxs)("div",{className:"mainsignup",children:[Object(D.jsxs)("div",{className:"ac1",children:[Object(D.jsx)("h1",{className:"createacc",children:"Create Account"}),Object(D.jsxs)("div",{id:"si1",children:[Object(D.jsx)("input",{type:"text",name:"firstname",value:n.firstname,onChange:p}),Object(D.jsx)("label",{className:""!==n.firstname?"Active":"",children:"First Name"})]}),Object(D.jsxs)("div",{id:"si2",children:[Object(D.jsx)("input",{type:"text",name:"lastname",value:n.lastname,onChange:p}),Object(D.jsx)("label",{className:""!==n.lastname?"Active":"",children:"Last Name"})]}),Object(D.jsxs)("div",{id:"si3",children:[Object(D.jsx)("input",{type:"text",name:"emailid",value:n.emailid,onChange:function(e){p(e)}}),Object(D.jsx)("label",{className:""!==n.emailid?"Active":"",children:"E-mail *"})]}),Object(D.jsxs)("div",{id:"si4",children:[Object(D.jsx)("input",{type:"text",name:"username",value:n.username,onChange:function(e){p(e),function(e){var t=e.target.value;if(""!==t){for(var n=0;n<i.length;n++)if(t===i[n])return void(document.getElementById("usernameValid").innerHTML="username is taken");document.getElementById("usernameValid").innerHTML="username is avaliable"}else document.getElementById("usernameValid").innerHTML=""}(e)}}),Object(D.jsx)("label",{className:""!==n.username?"Active":"",children:"Username *"})]}),Object(D.jsx)("div",{id:"usernameValid"}),Object(D.jsxs)("div",{id:"si5",children:[Object(D.jsx)("input",{type:"password",name:"password",value:n.password,onChange:p}),Object(D.jsx)("label",{className:""!==n.password?"Active":"",children:"Password *"})]}),Object(D.jsxs)("div",{id:"si6",children:[Object(D.jsx)("input",{type:"password",name:"confirmpassword",value:n.confirmpassword,onChange:p}),Object(D.jsx)("label",{className:""!==n.confirmpassword?"Active":"",children:"Re-enter Password *"})]}),Object(D.jsx)("div",{style:{textAlign:"center"},children:Object(D.jsx)("div",{className:"signupdiv signup",onClick:function(){document.getElementById("errorhandle1").innerHTML="",v(""),""!==n.password&&""!==n.username&&""!==n.confirmpassword&&n.emailid?n.confirmpassword!==n.password?document.getElementById("errorhandle1").innerHTML="Passwords not matching !":z.a.isEmail(n.emailid)?n.confirmpassword.length<=4?document.getElementById("errorhandle1").innerHTML="Password too weak...":-1!==h.indexOf(n.emailid)?document.getElementById("errorhandle1").innerHTML="Email already exists":(console.log(n),V.a.post("/backendapi/users/signup",{username:n.username,password:n.password,firstname:n.firstname,emailid:n.emailid,lastname:n.lastname}).then((function(e){v("Successfully Registered"),localStorage.setItem("username",n.username)})).catch((function(e){console.log(e),document.getElementById("errorhandle1").innerHTML="Email Exists!"}))):document.getElementById("errorhandle1").innerHTML="Enter an valid email id":document.getElementById("errorhandle1").innerHTML="Required fileds cannot be empty"},children:"Sign Up"})}),Object(D.jsx)("div",{id:"errorhandle1",className:"signupdiv1 "}),""!==f&&Object(D.jsxs)("div",{className:"signupdiv1 ",children:[f," ",Object(D.jsx)(A.b,{to:"/login",children:"go to Login"})]})]}),Object(D.jsxs)("div",{className:"ac2",children:[Object(D.jsx)("h1",{children:"Join our Community"}),Object(D.jsxs)("div",{className:"luxeries",children:[Object(D.jsx)("i",{class:"bi bi-bookmark-check-fill tickicon"}),Object(D.jsx)("span",{children:"Get full access to review the movies"})]}),Object(D.jsxs)("div",{className:"luxeries",children:[Object(D.jsx)("i",{class:"bi bi-bookmark-check-fill tickicon"}),Object(D.jsx)("span",{children:"Add the movies you want to watch later to your wishlists"})]}),Object(D.jsxs)("div",{className:"luxeries",children:[Object(D.jsx)("i",{class:"bi bi-bookmark-check-fill tickicon"}),Object(D.jsx)("span",{children:"Sort the best movies to watch"})]})]})]})})),Y=function(){return{type:N,payload:"Favorite Movies Fetch failed"}},q=function(e){return function(t){V.a.get("/backendapi/towatch",{headers:{Authorization:"bearer ".concat(e)}}).then((function(e){var n;t((n=e.data,{type:y,payload:n}))})).catch((function(e){t(Y),console.log(e)}))}},X=function(e,t){return function(n){n({type:w,payload:t}),V.a.post("/backendapi/towatch/".concat(t),null,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var a;n((a=e.data,{type:k,payload:[a,t]}))})).catch((function(e){console.log(e),n({type:L,payload:"favorite movie posting error"})}))}},K=function(e,t){return function(n){n({type:E,payload:t}),V.a.delete("/backendapi/towatch/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){var a;n((a=e.data,{type:C,payload:[a,t]}))})).catch((function(e){console.log(e),n({type:I,payload:"favorite movie deleteing error"})}))}},Q=Object(h.b)((function(e){return{user:e.auth.user}}),(function(e){return{userLogin:function(t){return e(P(t))},fetchWatchList:function(t){return e(q(t))}}}))((function(e){var t=Object(U.f)();return Object(r.useEffect)((function(){var n=localStorage.getItem("user");if(n){var a=JSON.parse(n);e.fetchWatchList(a.token),V.a.get("/backendapi/users",{headers:{Authorization:"bearer ".concat(a.token)}}).then((function(){e.userLogin(a)})).catch((function(){t.push("/login")}))}}),[t]),Object(D.jsx)("div",{})})),Z=n(105),$=n(32),ee=n(33),te=["className","checked"],ne=ee.a.div(a||(a=Object($.a)(["\n  display: inline-block;\n  vertical-align: middle;\n"]))),ae=ee.a.svg(c||(c=Object($.a)(["\n  fill: none;\n  stroke: white;\n  stroke-width: 2px;\n"]))),ce=ee.a.input.attrs({type:"checkbox"})(s||(s=Object($.a)(["\n  border: 0;\n  clip: rect(0 0 0 0);\n  clippath: inset(50%);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"]))),se=ee.a.div(i||(i=Object($.a)(["\n  display: inline-block;\n  width: 16px;\n  height: 16px;\n  background: ","\n  border-radius: 3px;\n  transition: all 150ms;\n\n  ",":focus + & {\n    box-shadow: 0 0 0 3px pink;\n  }\n\n  "," {\n    visibility: ","\n  }\n"])),(function(e){return e.checked?"salmon":"papayawhip"}),ce,ae,(function(e){return e.checked?"visible":"hidden"})),ie=function(e){var t=e.className,n=e.checked,a=Object(Z.a)(e,te);return Object(D.jsxs)(ne,{className:t,children:[Object(D.jsx)(ce,Object(u.a)({checked:n},a)),Object(D.jsx)(se,{checked:n,children:Object(D.jsx)(ae,{viewBox:"0 0 24 24",children:Object(D.jsx)("polyline",{points:"20 6 9 17 4 12"})})})]})};var re=Object(h.b)((function(e){return{isLogged:e.auth.isLogged,user:e.auth.user}}),(function(e){return{LogOut:function(){return[e((localStorage.clear(),window.location.reload(),{type:v})),e({type:"REFRESH_FAVORITES"})]}}}))((function(e){var t=Object(U.f)(),n=Object(U.g)(),a=Object(r.useState)(n.pathname),c=Object(b.a)(a,2),s=c[0],i=c[1];Object(r.useEffect)((function(){i(n.pathname)}),[n]);var o=function(){"1"===document.getElementById("ff").style.opacity?(document.getElementById("ff").style.opacity="0",document.getElementById("ff").style.height="0",document.getElementById("fliterarr").style.transform="rotateX(0deg)"):(document.getElementById("ff").style.height="auto",document.getElementById("ff").style.opacity="1",document.getElementById("fliterarr").style.transform="rotateX(180deg)")};return Object(D.jsxs)("div",{id:"headpart",children:[Object(D.jsxs)("div",{className:"logoname",children:["PIXELS",Object(D.jsx)("div",{className:"logofooter",children:"movie rating app"})]}),Object(D.jsxs)("div",{className:"jo",children:[("/movies"===s||"/"===s)&&Object(D.jsxs)("div",{className:"headerbutton dropdown2",children:[Object(D.jsxs)("span",{onClick:function(){o()},children:["Fliters",Object(D.jsx)("div",{id:"fliterarr",children:Object(D.jsx)("i",{className:"bi bi-funnel"})})]}),Object(D.jsxs)("div",{className:"dropdowncontent2",id:"ff",children:[Object(D.jsxs)("div",{className:"exitfli",children:[Object(D.jsx)("h3",{children:"Min Rating "}),Object(D.jsx)("input",{type:"range",id:"ratingrange",name:"volume",value:e.rating,min:"0",max:"4.5",step:"0.5",onChange:function(t){e.handleSort(t)}}),Object(D.jsx)("span",{className:"ratingvis",children:e.rating}),Object(D.jsx)("i",{onClick:function(){o()},className:"bi bi-x exitfliters"})]}),Object(D.jsxs)("div",{className:"er",children:[Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"action",onChange:function(t){e.handlegenre(t)},checked:e.fliters.action}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Action"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"drama",onChange:function(t){e.handlegenre(t)},checked:e.fliters.drama}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Drama"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"comedy",onChange:function(t){e.handlegenre(t)},checked:e.fliters.comedy}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Comedy"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"sci-fi",onChange:function(t){e.handlegenre(t)},checked:e.fliters["sci-fi"]}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Sci-fi"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"romance",onChange:function(t){e.handlegenre(t)},checked:e.fliters.romance}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Romance"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"adventure",onChange:function(t){e.handlegenre(t)},checked:e.fliters.adventure}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Adventure"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"horror",onChange:function(t){e.handlegenre(t)},checked:e.fliters.horror}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Horror"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"comics",onChange:function(t){e.handlegenre(t)},checked:e.fliters.comics}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Comics"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"thriller",onChange:function(t){e.handlegenre(t)},checked:e.fliters.thriller}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Thriller"})]})}),Object(D.jsx)("div",{className:"genrebox",children:Object(D.jsxs)("label",{children:[Object(D.jsx)(ie,{id:"fantasy",onChange:function(t){e.handlegenre(t)},checked:e.fliters.fantasy}),Object(D.jsx)("span",{style:{marginLeft:8},children:"Fantasy"})]})})]}),Object(D.jsx)("div",{className:"sorthandler"})]})]}),Object(D.jsx)("div",{className:"headerbutton watchlistbu",children:e.isLogged?Object(D.jsx)(A.b,{className:"linkstyle linkstyleheader",to:"/watchlist",children:"Watchlist"}):Object(D.jsx)(A.b,{className:"linkstyle linkstyleheader",to:"/aboutus",children:"About us"})}),e.isLogged?Object(D.jsxs)("div",{className:"headerbutton dropdown",children:[Object(D.jsx)("i",{class:"bi bi-person-fill"}),Object(D.jsxs)("span",{className:"usernameinheader",children:[e.user.userName,Object(D.jsx)("div",{className:"downarrow",children:Object(D.jsx)("i",{class:"bi bi-chevron-down arr"})})]}),Object(D.jsxs)("div",{className:"dropdown-content",children:[Object(D.jsx)("div",{className:"dropdowndiv",onClick:function(){return t.push("/movies")},children:"Home"}),Object(D.jsx)("div",{className:"dropdowndiv",onClick:function(){return t.push("/watchlist")},children:"Your watchlist"}),Object(D.jsx)("div",{className:"dropdowndiv",onClick:function(){return t.push("/settings")},children:"Account Settings"}),Object(D.jsx)("div",{className:"dropdowndiv",onClick:function(){return t.push("/aboutus")},children:"About us"}),Object(D.jsx)("div",{className:"dropdowndiv",onClick:e.LogOut,children:" Log out"})]})]}):Object(D.jsxs)("div",{className:"headerbutton",children:[Object(D.jsx)(A.b,{to:"/login",className:"linkstyle linkstyleheader",children:"Login"})," "]})]})]})})),oe=n(104),le=n(103);var de=function(e){var t=Object(r.useState)(null),n=Object(b.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(null),i=Object(b.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){e.lastrated&&c(e.lastrated)}),[e.lastrated]),Object(D.jsxs)("div",{className:"stars",children:[Object(D.jsx)("div",{children:Object(oe.a)(Array(5)).map((function(t,n){var s=n+1;return Object(D.jsxs)("label",{children:[Object(D.jsx)("input",{type:"radio",name:"rating",value:s,onClick:function(t){e.ratingCheck(t.target.value,e.MovieID),c(s)}}),Object(D.jsx)(le.a,{className:"star",size:window.innerWidth>900?50:25,color:s<=(o||a)?"#ffc107":"#e4e5e9",onMouseEnter:function(){return l(s)},onMouseLeave:function(){return l(null)}})]},"CommentComp".concat(e.MovieID).concat(s))}))}),Object(D.jsxs)("div",{onClick:function(){return e.postRating(e.MovieID)},className:"ratebutton",children:["Rate",e.lastrated?Object(D.jsx)("i",{class:"bi bi-check2-circle tick"}):" "]})]})};n(216);var ue=Object(h.b)((function(e){return{watchList:e.fav.FavMovies,user:e.auth.user,isLogged:e.auth.isLogged,isloading:e.fav.isloading}}),(function(e){return{fetchWatchList:function(t){return e(q(t))},deleteFav:function(t,n){return e(K(t,n))},postFav:function(t,n){return e(X(t,n))}}}))((function(e){var t=Object(r.useState)([]),n=Object(b.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)({}),i=Object(b.a)(s,2),o=i[0],l=i[1],d=Object(U.f)();Object(r.useEffect)((function(){var e=function(){var e=Object(H.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.body.style.overflowY="scroll",V.a.get("/backendapi/movies").then((function(e){c(e.data),console.log(e.data)})).catch((function(e){console.log(e),console.log("Movies fetch error")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return e(),function(){document.body.style.overflowY="auto"}}),[]),Object(r.useEffect)((function(){e.isLogged&&e.fetchWatchList(e.user.token)}),[e.user.token]);var h=function(e,t){l((function(n){return Object(u.a)(Object(u.a)({},n),{},Object(j.a)({},t,e))}))},m=function(t){e.isLogged?o[t]?e.isLogged&&V.a.get("/backendapi/movies/".concat(t)).then((function(n){for(var a=n.data,s=0;s<a.comments.length;s++)if(e.user.userid===a.comments[s].author)return V.a.put("/backendapi/movies/".concat(t,"/comments/").concat(a.comments[s]._id),{rating:o[t]},{headers:{Authorization:"bearer ".concat(e.user.token)}}).then((function(e){V.a.get("/backendapi/movies").then((function(e){c(e.data)})).catch((function(e){console.log(e),console.log("Movies fetch error")}))})).catch((function(e){console.log(e)})),null;V.a.post("/backendapi/movies/".concat(t,"/comments"),{rating:o[t]},{headers:{Authorization:"bearer ".concat(e.user.token)}}).then((function(e){V.a.get("/backendapi/movies").then((function(e){c(e.data)})).catch((function(e){console.log(e),console.log("Movies fetch error")}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})):console.log("Rating value cannot be null"):d.push("/login")},O=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a].rating;return(n/t).toFixed(1)},g=function(t){if(!e.user.userid)return 0;for(var n=t.length,a=0;a<n;a++)if(e.user.userid===t[a].author)return t[a].rating;return 0},f=function(t){for(var n=0;n<e.watchList.length;n++)if(e.watchList[n]._id===t)return!0;return!1},v=function(e,t){e||(e=0);for(var n=[],c=0;c<a.length;c++)O(a[c].comments)>=e&&n.push(a[c]);if(!t)return n;if(0===t.length)return n;for(var s=[],i=0;i<n.length;i++)for(var r=0;r<n[i].genre.length;r++)if(-1!==t.indexOf(n[i].genre[r])){s.push(n[i]);break}return s};return Object(D.jsxs)("div",{id:"allmovies",children:[0!==e.rating&&0===v(e.rating).length&&Object(D.jsx)("div",{id:"sorthandlerdiv1",children:"Loading..."}),v(e.rating,e.fliters).map((function(t){return Object(D.jsxs)("div",{className:"eachmovie",children:[Object(D.jsx)("img",{src:t.imageurl,alt:t.name+"image",className:"movieimg imagecenter"}),Object(D.jsxs)("div",{className:"moviedetails",children:[Object(D.jsx)("div",{children:Object(D.jsxs)("div",{className:"movietitle",children:[t.name," ",Object(D.jsx)("span",{children:e.isLogged?e.isloading[t._id]?Object(D.jsx)("span",{className:"loade",children:"Working on it..."}):Object(D.jsx)("span",{children:f(t._id)?Object(D.jsxs)("span",{onClick:function(){return n=t._id,void e.deleteFav(e.user.token,n);var n},className:"tooltip",children:[Object(D.jsx)("i",{className:"bi bi-dash-circle ko plusminussign"}),Object(D.jsx)("span",{className:"tooltiptext",children:"Remove from Watchlist"})]}):Object(D.jsxs)("span",{onClick:function(){return n=t._id,void e.postFav(e.user.token,n);var n},className:"tooltip",id:t._id+"addfav",children:[Object(D.jsx)("i",{className:"bi bi-plus-circle ko plusminussign"}),Object(D.jsx)("span",{className:"tooltiptext",children:"Add to your Watchlist"})]})}):""})]})}),Object(D.jsx)("div",{className:"avgrating",children:Object(D.jsxs)("span",{children:[Object(D.jsx)("span",{className:"avg",children:O(t.comments)}),Object(D.jsx)("span",{style:{color:"rgb(176, 197, 192)"},children:"/5"})," ",Object(D.jsxs)("span",{className:"noofratings",children:["(",t.comments.length," ratings)"]})]})}),Object(D.jsx)("div",{children:t.genre.map((function(e,t){return Object(D.jsx)("span",{className:"eachgenre",children:e},t)}))}),Object(D.jsxs)("div",{className:"cast",children:["Cast ",t.cast.map((function(e,t){return Object(D.jsx)("span",{className:"eachcast",children:e},e+t)}))]}),Object(D.jsx)(de,{MovieID:t._id,ratingCheck:h,postRating:m,lastrated:g(t.comments)})]})]},t._id)}))]})}));var je=Object(h.b)((function(e){return{watchList:e.fav.FavMovies,user:e.auth.user,isLogged:e.auth.isLogged}}),(function(e){return{fetchWatchList:function(t){return e(q(t))},deleteFav:function(t,n){return e(K(t,n))}}}))((function(e){Object(r.useEffect)((function(){e.isLogged&&e.fetchWatchList(e.user.token)}),[]);var t=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a].rating;return(n/t).toFixed(1)};return Object(D.jsx)("div",{id:"watchlistdiv",children:e.isLogged?0===e.watchList.length?Object(D.jsxs)("div",{className:"emptywatchlist",children:["Your watchilst is empty",Object(D.jsx)("i",{class:"bi bi-emoji-frown-fill sad"})]}):e.watchList.map((function(n){return Object(D.jsxs)("div",{className:"eachmovie eachfavormovie",children:[Object(D.jsx)("img",{src:n.imageurl,alt:n.name+"image",className:"movieimg imagecenter"}),Object(D.jsxs)("div",{className:"moviedetails",children:[Object(D.jsx)("div",{children:Object(D.jsxs)("div",{className:"movietitle",children:[n.name," ",Object(D.jsx)("span",{className:"deletewat",onClick:function(){return t=n._id,void e.deleteFav(e.user.token,t);var t},children:Object(D.jsx)("i",{class:"bi bi-trash"})})]})}),Object(D.jsx)("div",{className:"avgrating",children:Object(D.jsxs)("span",{children:[Object(D.jsx)("span",{className:"avg",children:t(n.comments)}),Object(D.jsx)("span",{style:{color:"rgb(176, 197, 192)"},children:"/5"})," ",Object(D.jsxs)("span",{className:"noofratings",children:["(",n.comments.length," ratings)"]})]})}),Object(D.jsx)("div",{children:n.genre.map((function(e,t){return Object(D.jsx)("span",{className:"eachgenre",children:e},t)}))}),Object(D.jsxs)("div",{className:"cast",children:["Cast ",n.cast.map((function(e,t){return Object(D.jsx)("span",{className:"eachcast",children:e},e+t)}))]})]})]},n._id+"favor")})):Object(D.jsx)(A.b,{to:"/login",children:"Login"})})}));var be=Object(h.b)((function(e){return{isLogged:e.auth.isLogged,user:e.auth.user}}),(function(e){return{Changeaccountdetails:function(t){return e({type:"CHANGE_ACCOUNTDETAILS",payload:t})}}}))((function(e){var t=Object(r.useState)({}),n=Object(b.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(b.a)(s,2),o=i[0],l=i[1];Object(r.useEffect)((function(){V.a.get("/backendapi/users/usernames").then((function(e){l(e.data)})).catch((function(e){console.log("Fetch failed of getting all usernames")})),c((function(t){return Object(u.a)(Object(u.a)({},t),{},{username:e.user.userName,lastname:e.user.userLastName,firstname:e.user.userFirstName})}))}),[e.user]);var d=function(e){c((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))};return Object(D.jsxs)("div",{className:"settingsdiv",children:[Object(D.jsxs)("div",{className:"eachsettingdiv",children:[Object(D.jsx)("div",{className:"settingstitle",children:"Firstname: "}),Object(D.jsx)("input",{id:"changefirstname",type:"text",name:"firstname",onChange:d,value:a.firstname})]}),Object(D.jsxs)("div",{className:"eachsettingdiv",children:[Object(D.jsx)("div",{className:"settingstitle",children:"Lastname: "}),Object(D.jsx)("input",{id:"changelastname",type:"text",name:"lastname",onChange:d,value:a.lastname})]}),Object(D.jsxs)("div",{className:"eachsettingdiv",children:[Object(D.jsx)("div",{className:"settingstitle",children:"Username: "}),Object(D.jsx)("input",{type:"text",name:"username",onChange:function(t){d(t),function(t){var n=t.target.value;if(n!==e.user.userName){for(var a=0;a<o.length;a++)if(n===o[a])return void(document.getElementById("accountk").innerHTML="username is taken");document.getElementById("accountk").innerHTML="username is avaliable"}else document.getElementById("accountk").innerHTML=""}(t)},value:a.username})]}),Object(D.jsx)("div",{className:"eachsettingdiv",id:"accountk"}),Object(D.jsx)("div",{className:"eachsettingdiv changedet",onClick:function(){a.username?e.user.userName===a.username||-1===o.indexOf(a.username)?V.a.put("/backendapi/users/accountdetails",a,{headers:{Authorization:"Bearer ".concat(e.user.token)}}).then((function(t){document.getElementById("accerr").innerHTML="Successfully Saved",e.Changeaccountdetails(a)})).catch((function(e){console.log(e),document.getElementById("accerr").innerHTML=e.message})):document.getElementById("accerr").innerHTML="Username exists":document.getElementById("accerr").innerHTML="username Field required"},children:"Save Details"}),Object(D.jsx)("div",{className:"eachsettingdiv",id:"accerr"})]})}));var he=function(){return Object(D.jsxs)("div",{className:"us",children:[Object(D.jsxs)("div",{className:"aboutus",children:[Object(D.jsx)("strong",{children:"P"}),"ixels it is designed to provide our users what they want .If you\u2019re an entertainment fan looking for a recommendation, or to share an opinion, you\u2019ve come to the right place. Use it as a diary to record and share your opinion about films as you watch them, or just to keep track of films you need to watch later.Keep your feed what you want by adding fliters.",Object(D.jsxs)("h2",{children:[Object(D.jsx)("i",{class:"bi bi-people-fill"})," Join Us!  Free of Cost"]})]}),Object(D.jsxs)("div",{className:"lastone",children:["\xa9 All Rigits Reserved",Object(D.jsxs)("span",{children:[Object(D.jsx)("a",{href:"https://www.linkedin.com/in/yashwanth-reddy-bbb657193",target:"_blank",children:Object(D.jsx)("i",{className:"bi bi-linkedin"})}),Object(D.jsx)("a",{href:"mailto:yaswanthreddy909@gmail.com",children:"Yashwanth Reddy"})]})]})]})},me=n(102),Oe=n.n(me);var ge=function(){var e=Object(r.useState)(!1),t=Object(b.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),s=Object(b.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(""),d=Object(b.a)(l,2),h=d[0],m=d[1],O=Object(r.useState)(""),g=Object(b.a)(O,2),f=g[0],v=g[1],p=Object(r.useState)({email:"",password:"",confirmpassword:"",otp:""}),x=Object(b.a)(p,2),y=x[0],N=x[1];Object(r.useEffect)((function(){n&&V.a.post("/backendapi/users/getusername",{emailid:y.email}).then((function(e){v(e.data.username),console.log(e.data)})).catch((function(e){console.log(e)}))}),[n]);var w=function(e){n?document.getElementById("otpche").innerHTML="":document.getElementById("emailche").innerHTML="",N((function(t){return Object(u.a)(Object(u.a)({},t),{},Object(j.a)({},e.target.name,e.target.value))}))};return Object(D.jsx)("div",{children:n?Object(D.jsxs)("div",{children:[Object(D.jsxs)("div",{id:"otpdiv",children:[Object(D.jsxs)("h2",{children:["Hi ",f,", Enter the OTP four digit pin"]}),Object(D.jsx)(Oe.a,{value:h,onChange:function(e){document.getElementById("otpche").innerHTML="",m(e),N((function(t){return Object(u.a)(Object(u.a)({},t),{},{otp:e})}))},numInputs:4,inputStyle:"inputotp",focusStyle:"focusotp",separator:Object(D.jsx)("span",{}),containerStyle:"contotp"})]}),Object(D.jsxs)("div",{className:"fudiv1",children:[Object(D.jsx)("div",{className:"fudiv",children:Object(D.jsxs)("div",{id:"changepassworddiv",children:[Object(D.jsx)("input",{type:"text",name:"password",value:y.password,onChange:function(e){return w(e)}}),Object(D.jsx)("label",{htmlFor:"text",className:""!==y.password?"Active":"",children:"New Password"})]})}),Object(D.jsx)("div",{className:"fudiv",children:Object(D.jsxs)("div",{id:"changepassworddiv1",children:[Object(D.jsx)("input",{type:"text",name:"confirmpassword",value:y.confirmpassword,onChange:function(e){return w(e)}}),Object(D.jsx)("label",{htmlFor:"text",className:""!==y.confirmpassword?"Active":"",children:"Re-enter Password"})]})})]}),Object(D.jsxs)("div",{className:"resetbt",children:[Object(D.jsx)("div",{onClick:function(){y.password===y.confirmpassword?y.password.length<=4?document.getElementById("otpche").innerHTML="Password min length is 5":V.a.post("/backendapi/retreivepassword/q",y).then((function(e){o(!0),document.getElementById("otpche").innerHTML="Successfully Changed "})).catch((function(e){document.getElementById("otpche").innerHTML="OTP not matched"})):document.getElementById("otpche").innerHTML="Passwords mismatched"},className:"bt2",children:"Reset Password"}),Object(D.jsx)("div",{id:"otpche"}),Object(D.jsx)("span",{children:i?Object(D.jsx)(A.b,{to:"/login",children:"Login"}):""})]})]}):Object(D.jsxs)("div",{className:"emaildiv",children:[Object(D.jsx)("h2",{children:"Forgot Password? "}),Object(D.jsxs)("div",{className:"downemail",children:[Object(D.jsx)("h3",{children:"Enter the email address associated with your Account"}),Object(D.jsx)("div",{className:"bluremail",children:"We will mail you a 4 digit otp for confirmation"}),Object(D.jsxs)("div",{className:"emailinput",children:[Object(D.jsxs)("div",{id:"emailinputdiv",children:[Object(D.jsx)("input",{type:"text",name:"email",value:y.email,onChange:w}),Object(D.jsx)("label",{htmlFor:"text",className:""!==y.email?"Active":"",children:"Enter the Email address"})]}),Object(D.jsx)("span",{className:"sendotpbt",onClick:function(){V.a.post("/backendapi/retreivepassword",{emailid:y.email}).then((function(e){console.log("OTP sent to the registred Email"),a(!0)})).catch((function(e){console.log(e),document.getElementById("emailche").innerHTML='Sorry <i class="bi bi-emoji-frown"></i> your email is not in our database <a href="/signup">Create an account</a>'}))},children:"Confirm"})]}),Object(D.jsx)("div",{id:"emailche"})]})]})})};var fe=function(){var e,t=Object(r.useState)((e={minrate:0,action:!1,drama:!1,comedy:!1},Object(j.a)(e,"sci-fi",!1),Object(j.a)(e,"horror",!1),Object(j.a)(e,"adventure",!1),Object(j.a)(e,"comics",!1),Object(j.a)(e,"thriller",!1),Object(j.a)(e,"romance",!1),Object(j.a)(e,"fantasy",!1),e)),n=Object(b.a)(t,2),a=n[0],c=n[1],s=function(e){for(var t=Object.keys(e),n=[],a=1;a<t.length;a++)e[t[a]]&&n.push(t[a]);return n};return Object(D.jsx)(A.a,{children:Object(D.jsxs)(h.a,{store:F,children:[Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(re,{handleSort:function(e){var t=e.target.value;c((function(e){return Object(u.a)(Object(u.a)({},e),{},{minrate:t})}))},rating:a.minrate,handlegenre:function(e){var t=e.target.id,n=!a[t];c((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(j.a)({},t,n))}))},fliters:a}),Object(D.jsxs)(U.c,{children:[Object(D.jsx)(U.a,{exact:!0,path:"/",component:function(){return Object(D.jsx)(ue,{rating:a.minrate,fliters:s(a)})}}),Object(D.jsx)(U.a,{exact:!0,path:"/login",component:W}),Object(D.jsx)(U.a,{exact:!0,path:"/signup",component:function(){return Object(D.jsx)(G,{})}}),Object(D.jsx)(U.a,{exact:!0,path:"/movies",component:function(){return Object(D.jsx)(ue,{rating:a.minrate,fliters:s(a)})}}),Object(D.jsx)(U.a,{exact:!0,path:"/settings",component:be}),Object(D.jsx)(U.a,{exact:!0,path:"/watchlist",component:je}),Object(D.jsx)(U.a,{exact:!0,path:"/aboutus",component:he}),Object(D.jsx)(U.a,{exact:!0,path:"/otpgenerator",component:ge})]})]}),Object(D.jsx)(Q,{})]})})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,287)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};d.a.render(Object(D.jsx)(o.a.StrictMode,{children:Object(D.jsx)(fe,{})}),document.getElementById("root")),ve()}},[[286,1,2]]]);
//# sourceMappingURL=main.83d6f46b.chunk.js.map